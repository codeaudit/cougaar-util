
How to configure Cougaar to use OpenLdap as its name server rather than its
built-in RMI name server.

Last Updated: June 28, 2002


1)  Set up OpenLdap as per its instructions.

2)  Add a line like this to slapd.conf to add a schema file:
  include         /etc/openldap/schema/cougaar.schema

3)  Add a schema file containing definitions for the attributes required
by Cougaar.  Its contents should include at least this:

---------------------------%<--------------------------------------
#
# cougaar.schema
#
attributetype ( 1.3.6.1.4.1.4203.666.1.5.1 NAME ( 'Enclave' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.2 NAME ( 'Site' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.4 NAME ( 'Node' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.5 NAME ( 'Agent' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.6 NAME ( 'Incarnation' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.7 NAME ( 'MoveId' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.8 NAME ( 'IsNode' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.9 NAME ( 'Status' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.10 NAME ( 'MTS' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.11 NAME ( 'Address' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.12 NAME ( 'Type' ) SUP name )

# Community Attributes
attributetype ( 1.3.6.1.4.1.4203.666.1.5.13 NAME ( 'CommunityType' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.14 NAME ( 'CommunityManager' ) SUP userPassword )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.15 NAME ( 'EntityType' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.16 NAME ( 'Role' ) SUP name )
attributetype ( 1.3.6.1.4.1.4203.666.1.5.17 NAME ( 'ExternalRole' ) SUP name )
---------------------------%<--------------------------------------

[Note that these OIDs are made up.  Todo: Get a cougaar OID arc.]
If you add attributes (eg. community attributes) you'll need to add 
to this list.

4) Start OpenLdap


5) Configure the Cougaar parameters to point to the OpenLdap directory.  Add these to alpreg.ini or the java VM properties:

---------------------------%<--------------------------------------
org.cougaar.nameserver.baseDN=dc=cougaar,dc=org
java.naming.provider.url=ldap://localhost:389
java.naming.security.authentication=simple
java.naming.security.principal=cn=manager,dc=cougaar,dc=org
java.naming.security.credentials=secret
---------------------------%<--------------------------------------
[Note: You may have to change these to match your configuration.  These are
the defaults]

6) Add this java property to the java command line that starts the node:

  -Djava.naming.factory.initial=org.cougaar.core.naming.LdapCtxFactory

You can do this by editing Node.bat or in the CSMART "Global Command Line" list.

7) That should do it.  Run it.


Unlike the Cougaar RMI nameserver, the LDAP nameserver is persistent.  If 
you manually move an agent to a new node or move a node to a new host, 
you'll need to clear out the nameserver.  Cougaar will rebuild it the next 
time you run.  Assuming you used the default parameters, you can use the 
"ldapdelete" command to clear out the entries like this:

---------------------------%<--------------------------------------
ldapdelete -x -r -D "cn=manager, dc=cougaar, dc=org" -w secret -h localhost "dc=Agents, dc=cougaar, dc=org"
ldapdelete -x -r -D "cn=manager, dc=cougaar, dc=org" -w secret -h localhost "dc=MessageTransports, dc=cougaar, dc=org"
ldapdelete -x -r -D "cn=manager, dc=cougaar, dc=org" -w secret -h localhost "dc=Topology, dc=cougaar, dc=org"
ldapdelete -x -r -D "cn=manager, dc=cougaar, dc=org" -w secret -h localhost "dc=WEBSERVERS, dc=cougaar, dc=org"
ldapdelete -x -r -D "cn=manager, dc=cougaar, dc=org" -w secret -h localhost "dc=Communities, dc=cougaar, dc=org"
---------------------------%<--------------------------------------

